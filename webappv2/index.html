<div id="hr-widget"></div>
<script type="module" src="https://homereserve.ru/widget.js"></script>
<script type="module">
    window.homereserve.initWidgetSearch({"token": "AAEKnw"});
</script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    Telegram.WebApp.ready();
    const originalFetch = window.fetch;

    window.fetch = async (...args) => {
        const url = args[0];
        console.log('Intercepted fetch request to:', url);

        if (url.includes('/confirm')) {
            console.log('Request to /confirm detected:', args);

            const requestPayload = args[1]?.body;
            if (requestPayload) {
                try {
                    const text = await requestPayload.text();
                    console.log('Payload for /confirm:', text);
                } catch (error) {
                    console.error('Error reading request payload:', error);
                }
            }
            try {
                console.log('Sending intercepted request to Telegram:', interceptedRequest);
                Telegram.WebApp.sendData(JSON.stringify(interceptedRequest));
            } catch (error) {
                console.error('Error sending data to Telegram:', error);
            }
        }

        return originalFetch(...args);
    };
</script>
